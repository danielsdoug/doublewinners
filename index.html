<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Orange County Double Winners</title>

  <!-- Favicon & Logo -->
  <link rel="icon" href="images/favicon2.ico" sizes="any">
  <link rel="apple-touch-icon" href="images/logo2.png">

  <style>
    :root{
      --bg:#0f1115; --panel:#141824; --text:#e7ebf3; --muted:#9aa4b2;
      --link:#7aa2ff; --link-hover:#a9c1ff; --border:#222836; --radius:16px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{
      margin:0;padding:0;background:var(--bg);color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;
      line-height:1.6
    }
    a{color:var(--link);text-decoration:none}
    a:hover{color:var(--link-hover);text-decoration:underline}

    /* ===== Header / Nav ===== */
    header{
      position:sticky;top:0;background:rgba(15,17,21,.8);
      backdrop-filter:saturate(140%) blur(8px);
      border-bottom:1px solid var(--border);z-index:20
    }
    .wrap{max-width:1100px;margin:auto;padding:24px}
    .brand{display:flex;align-items:center;gap:14px}
    .brand img{height:32px;width:auto;filter:drop-shadow(0 2px 6px rgba(0,0,0,.35))}
    .brand h1{margin:0;font-size:1.6rem}

    /* Desktop nav */
    nav{margin-top:10px}
    nav a{margin-right:18px;font-weight:600;display:inline-block;padding:8px 2px}

    /* Mobile nav toggle */
    .nav-toggle{
      display:none;border:0;background:transparent;color:var(--text);
      font-size:28px;line-height:1;padding:6px 10px;border-radius:8px;cursor:pointer
    }
    .nav-toggle:focus{outline:2px solid var(--link);outline-offset:2px}

    /* Cards & common UI */
    .card{
      background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);
      box-shadow:var(--shadow);padding:22px
    }

    /* Top layout: 2 columns (left column stacks two cards) */
    .top{display:grid;gap:18px;margin:18px 0}
    @media(min-width:960px){ .top{grid-template-columns:1fr 1fr} }
    .left-col{display:grid;gap:18px}

    h2{margin:.2rem 0 1rem;font-size:1.35rem}
    .muted{color:var(--muted)}
    .btnrow{display:flex;flex-wrap:wrap;gap:10px;margin:.6rem 0 0}
    .btn{
      display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;
      border:1px solid var(--border);background:#1a2030;color:var(--text);font-weight:600;cursor:pointer
    }
    .btn:hover{background:#20283b}

    /* Calendar */
    iframe.calendar{
      width:100%;min-height:620px;border:0;border-radius:12px;background:#0a0c12
    }
    .calendar-wrapper{background:#0a0c12;padding:6px;border-radius:12px}

    /* Resources grid */
    .pdf-grid{display:grid;gap:14px;margin-top:6px}
    @media(min-width:640px){ .pdf-grid{grid-template-columns:repeat(2,1fr)} }
    @media(min-width:920px){ .pdf-grid{grid-template-columns:repeat(3,1fr)} }
    .pdf-card{
      display:flex;flex-direction:column;gap:8px;
      background:#121826;border:1px solid var(--border);border-radius:12px;
      padding:12px;text-decoration:none;color:var(--text); cursor:pointer;
    }
    .pdf-card:hover{border-color:#2e3a56}
    .pdf-card img{
      width:100%;height:220px;object-fit:contain;object-position:center top;
      border:1px solid var(--border);border-radius:8px;background:#0b0f16
    }
    .pdf-card span{font-weight:600}

    /* Contact form */
    .dw-form{margin-top:14px;display:grid;gap:12px}
    .dw-row{display:grid;gap:12px}
    @media(min-width:680px){ .dw-row{grid-template-columns:1fr 1fr} }
    .dw-form label{display:grid;gap:6px}
    .dw-form input,.dw-form textarea{
      background:#1a2030;color:var(--text);border:1px solid var(--border);
      border-radius:10px;padding:10px 12px;outline:none
    }
    .dw-form input:focus,.dw-form textarea:focus{border-color:#3d4a6a}
    .dw-note{margin-top:6px;color:var(--muted)}
    .dw-note.success{color:#a9e5b1}
    .dw-note.error{color:#ffb3b3}

    footer{border-top:1px solid var(--border);margin-top:30px}
    small{color:var(--muted)}

    /* ===== PDF Reader Overlay ===== */
    .pdf-modal{ position:fixed; inset:0; display:none; place-items:center; z-index:1000;
      background:rgba(0,0,0,.85); padding:20px; }
    .pdf-modal.open{ display:grid; }
    .pdf-modal__panel{ width:min(95vw,1000px); height:min(92vh,900px);
      background:#0b0f16; border:1px solid #2a3246; border-radius:14px; display:flex; flex-direction:column;
      box-shadow:0 20px 60px rgba(0,0,0,.6); }
    .pdf-modal__bar{ display:flex; align-items:center; gap:10px; justify-content:space-between;
      padding:10px 12px; border-bottom:1px solid #222b3b; background:#121826; border-radius:14px 14px 0 0; }
    .pdf-modal__title{font-weight:700}
    .pdf-modal__actions{display:flex; gap:10px}
    .pdf-modal__actions a, .pdf-modal__actions button{ border:1px solid var(--border); background:#1a2030; color:var(--text);
      padding:8px 12px; border-radius:10px; cursor:pointer; text-decoration:none; font-weight:600; }
    .pdf-modal__actions a:hover, .pdf-modal__actions button:hover{ background:#20283b }
    .pdf-frame{ width:100%; height:100%; border:0; border-radius:0 0 14px 14px; background:#0b0f16; }

    /* ====== Mobile-only tuning (no desktop changes) ====== */
    @media (max-width: 560px){
      .wrap{padding:16px}
      .brand img{height:28px}
      .brand h1{font-size:1.25rem}
      /* show hamburger, collapse nav */
      .nav-toggle{display:block;margin-left:auto}
      nav{display:none;margin-top:8px}
      nav.open{display:block}
      nav a{
        display:block;margin:0;padding:12px 0;border-top:1px solid var(--border)
      }
      nav a:last-child{border-bottom:1px solid var(--border)}
      /* thumb-friendly buttons */
      .btn{width:100%;text-align:center}
      /* calendar height a bit shorter to avoid initial scroll jump */
      iframe.calendar{min-height:650px}
      /* cards: slightly softer radius on phones */
      .card{border-radius:14px}

      /* === NEW: Full-bleed calendar on phones === */
      .calendar-bleed{
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
      }
      .calendar-bleed iframe{
        width:100vw !important;
        min-width:100vw !important;
        display:block;
      }
      /* reduce side padding so the iframe isn’t boxed in */
      #calendar.card{ padding:14px 0; }
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <a href="/" aria-label="Home"><img src="images/logo2.png" alt="Double Winners OC logo"></a>
        <h1>OC Double Winners</h1>
        <!-- Mobile hamburger -->
        <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav" aria-label="Menu">☰</button>
      </div>
      <nav id="site-nav" aria-label="Primary">
        <!-- removed Welcome -->
        <a href="#calendar">Meetings</a>
        <a href="#double-winner">What is a Double Winner?</a>
        <a href="#resources">Resources</a>
        <a href="#links">Links</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <main class="wrap">

    <!-- Top: Left column (Welcome + What is), Right column (Calendar) -->
    <div class="top">
      <div class="left-col">
        <section id="welcome" class="card">
          <h2>Welcome to OC Double Winners</h2>
          <p>
            OC Double Winners provides information on Double Winners meetings in Orange County, California, USA.
            Here you’ll find current DW meeting schedules in the area, literature, readings and downloadable group handouts to start your own Double Winners meeting.
            <br><br>Because Double Winners meetings aren’t officially recognized by Al-Anon or AA, they’re often not included in local meeting directories.
            This site aims to help bridge that gap and provide a resource for those seeking to attend or begin Double Winners meetings in Orange County.
          </p>
        </section>

        <section id="double-winner" class="card">
          <h2>What is a Double Winner?</h2>
          <p>
            We call ourselves DOUBLE WINNERS because, firstly, we are WINNERS in that we follow the 12 steps of AA which teaches us how to live and deal with ourselves. Secondly, we are also WINNERS because we follow the 12 steps of Al-Anon which teaches us how to live and deal with everyone else in our lives. The two together makes us DOUBLE WINNERS, and through the two programs, we learn how to live internally and externally on the journey to greater serenity. Accordingly, we learn how to apply good principles and concepts in all our relationships, including with ourselves.
          </p>
        </section>
      </div>

      <section id="calendar" class="card">
        <h2 style="margin-bottom:.5rem">Double Winner Meetings in OC</h2>


        <!-- NEW: full-bleed wrapper for mobile -->
        <div class="calendar-bleed">
          <div class="calendar-wrapper">
            <iframe
              id="gcalFrame"
              class="calendar"
              src="https://calendar.google.com/calendar/embed?mode=AGENDA&showTabs=0&showPrint=0&showTitle=0&bgcolor=%230a0c12&src=c_68a6088086a57a5f1a7552c92d86b7d64eda7be32444a1dcbed5f40f393b6042%40group.calendar.google.com&ctz=America%2FLos_Angeles"
              loading="lazy"
              title="Double Winners OC Calendar">
            </iframe>
          </div>
          <div class="btnrow">
          <a id="openCal" class="btn" href="#" target="_blank" rel="noopener">Open in Google Calendar</a>
          <a id="icsLink" class="btn" href="#" target="_blank" rel="noopener">Subscribe (ICS)</a>
        </div>
        </div>
      </section>
    </div>

    <!-- Resources -->
    <section id="resources" class="card">
      <h2>Resources</h2>
      <p class="muted" style="margin-top:-6px;margin-bottom:10px;">
        Resources & (printable) Readings for Double Winners Meetings:
      </p>

      <div class="pdf-grid">
        <a class="pdf-card" href="assets/Double-Winners-Leader-Format.pdf" data-pdf="assets/Double-Winners-Leader-Format.pdf">
          <img src="images/thumb-leader.png" alt="Double-Winners Leader Format thumbnail">
          <span>Double Winners Leader Format (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/dw-secretary-format.pdf" data-pdf="assets/dw-secretary-format.pdf">
          <img src="images/thumb-secretary.png" alt="DW Secretary Format thumbnail">
          <span>Double Winners Secretary Format (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/dos-and-donts.pdf" data-pdf="assets/dos-and-donts.pdf">
          <img src="images/thumb-dos.png" alt="Dos and Don’ts thumbnail">
          <span>Do's and Don'ts Reading (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/dos_and_donts_business_card.pdf" data-pdf="assets/dos_and_donts_business_card.pdf">
          <img src="images/thumb-dos-card.png" alt="Dos and Don’ts Business Card thumbnail">
          <span>Do's and Don'ts Business Card Handouts (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/Detachment.pdf" data-pdf="assets/Detachment.pdf">
          <img src="images/thumb-detachment.png" alt="Detachment thumbnail">
          <span>Detachment Reading (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/letting-go.pdf" data-pdf="assets/letting-go.pdf">
          <img src="images/thumb-lettinggo.png" alt="Letting Go thumbnail">
          <span>Letting Go Reading (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/opening-prayer.pdf" data-pdf="assets/opening-prayer.pdf">
          <img src="images/thumb-prayer.png" alt="Opening Prayer thumbnail">
          <span>Opening Prayer Reading (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/DW-Closing-Reading.pdf" data-pdf="assets/DW-Closing-Reading.pdf">
          <img src="images/thumb-closing.png" alt="Closing Prayer (Optional) thumbnail">
          <span>Closing Prayer (Optional) (PDF)</span>
        </a>

        <a class="pdf-card" href="assets/Double-Winners-Meeting-Topics-2025.pdf" data-pdf="assets/Double-Winners-Meeting-Topics-2025.pdf">
          <img src="images/thumb-topics-2025.png" alt="Double Winners Meeting Topics 2025 thumbnail">
          <span>Double Winners Meeting Topics (PDF)</span>
        </a>
      </div>
    </section>

    <!-- Links -->
    <section id="links" class="card">
      <h2>Links</h2>
      <ul>
        <li><a href="https://doublewinnersanonymous.com" target="_blank" rel="noopener">DoubleWinnersAnonymous.com</a> – A Double Winners resource.</li>
        <li><a href="https://docs.google.com/spreadsheets/d/1HUy8gOQcUSSTb-PU4PC5HqVN4phaUu_Q/edit?gid=439845178#gid=439845178" target="_blank" rel="noopener">Online Double Winners Meetings</a> – An International listing of ZOOM Double Winners Meetings.</li>
        <li><a href="https://ecomm.al-anon.org/ItemDetail?iProductCode=P45&Category=PAMPHLETS&WebsiteKey=db6e68f1-b2fe-4aaa-baea-928d4e696dcc" target="_blank" rel="noopener">The Al-Anon Focus Pamphlet #45</a> — The Al-Anon Focus, the basis of all Double Winners programs.</li>
        <li><a href="https://sc-fc.org" target="_blank" rel="noopener">San Clemente Friendship Center</a> – Our sister site and long-serving AA Club in San Clemente, CA.</li>
        <li><a href="https://saddlebackclub.com/" target="_blank" rel="noopener">Saddleback Club</a> – Recovery meeting clubhouse in Lake Forest, CA, offering numerous 12-step meetings.</li>
        <li><a href="https://sunsetbeachfellowship.org/" target="_blank" rel="noopener">Sunset Beach Fellowship</a> – Community fellowship hall in Sunset Beach, CA, with AA/Al-Anon meetings.</li>
        <li><a href="https://www.canyonclub.org/" target="_blank" rel="noopener">Canyon Club</a> – Premier AA/Al-Anon meeting location in Laguna Beach, CA.</li>
      </ul>
    </section>

    <!-- Contact -->
    <section id="contact" class="card">
      <h2>Contact</h2>
      <p>Questions about Double Winners Meetings in the OC? <br> Would you like to add your Double Winner meeting to our directory?<br>  Fill out the form below or email us at <a href="mailto:hello@ocdoublewinners.com">hello@ocdoublewinners.com</a>.</p>

      <!-- Contact Form -->
      <form id="contactForm" class="dw-form" data-endpoint="https://formspree.io/f/xwprebja">
        <div class="dw-row">
          <label>
            <span>Name</span>
            <input type="text" name="name" autocomplete="name" required />
          </label>
          <label>
            <span>Email</span>
            <input type="email" name="email" autocomplete="email" required />
          </label>
        </div>

        <label>
          <span>Subject</span>
          <input type="text" name="subject" required />
        </label>

        <label>
          <span>Message</span>
          <textarea name="message" rows="5" required></textarea>
        </label>

        <button type="submit" class="btn">Send</button>
        <div id="formNote" class="dw-note" aria-live="polite"></div>
      </form>
    </section>
  </main>

  <footer class="wrap">
    <small>
      © <span id="year"></span> Orange County Double Winners<br>
      A public service site in partnership with the 
      <a href="https://sc-fc.org" target="_blank" rel="noopener">San Clemente Friendship Center</a>.<br>
      Contact us directly at <a href="mailto:hello@ocdoublewinners.com">hello@ocdoublewinners.com</a>
    </small>
  </footer>

  <!-- ===== PDF Reader Overlay ===== -->
  <div class="pdf-modal" id="pdfModal" aria-hidden="true" role="dialog" aria-label="Reader">
    <div class="pdf-modal__panel">
      <div class="pdf-modal__bar">
        <div class="pdf-modal__title" id="pdfTitle">Reader</div>
        <div class="pdf-modal__actions">
          <a id="pdfOpen" href="#" target="_blank" rel="noopener">Open PDF</a>
          <button id="pdfPrint" type="button" title="Print">Print</button>
          <button id="pdfClose" type="button">Close</button>
        </div>
      </div>
      <iframe id="pdfFrame" class="pdf-frame" src="" title="PDF preview"></iframe>
    </div>
  </div>

  <script>
    (function(){
      // Year in footer
      const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();

      // Build “Open in Google Calendar” + ICS links
      const frame = document.getElementById('gcalFrame');
      const openBtn = document.getElementById('openCal');
      const icsBtn  = document.getElementById('icsLink');
      function param(u, k){ try{ return new URL(u).searchParams.get(k) || ""; }catch(e){ return ""; } }
      const src = frame ? param(frame.src,'src') : "";
      if (src){
        if (openBtn) openBtn.href = "https://calendar.google.com/calendar/u/0/r?cid=" + encodeURIComponent(src);
        if (icsBtn)  icsBtn.href  = "https://calendar.google.com/calendar/ical/" + encodeURIComponent(src) + "/public/basic.ics";
      }

      // ===== Mobile hamburger toggle =====
      const toggle = document.querySelector('.nav-toggle');
      const nav = document.getElementById('site-nav');
      if(toggle && nav){
        toggle.addEventListener('click', ()=>{
          const open = nav.classList.toggle('open');
          toggle.setAttribute('aria-expanded', String(open));
        });
      }

      // ===== Contact form (Formspree) =====
      const form = document.getElementById('contactForm');
      if (form){
        const note = document.getElementById('formNote');
        const endpoint = (form.dataset.endpoint || '').trim();

        function setNote(msg, ok){
          if(!note) return;
          note.textContent = msg;
          note.classList.remove('success','error');
          note.classList.add(ok ? 'success' : 'error');
        }

        form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          if (note){ note.textContent = 'Sending...'; note.className = 'dw-note'; }

          // Collect fields
          const payload = {
            name: form.name.value.trim(),
            email: form.email.value.trim(),
            subject: form.subject.value.trim(),
            message: form.message.value.trim(),
            _site: 'ocdoublewinners.com'
          };

          if (!endpoint){
            setNote('Form endpoint missing. Please email hello@ocdoublewinners.com.', false);
            return;
          }

          try {
            const r = await fetch(endpoint, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
              },
              body: JSON.stringify(payload)
            });

            let result = {};
            try { result = await r.json(); } catch(_) {}

            if (!r.ok || result.ok === false) {
              const errMsg = (result && (result.error || result.message)) || `Request failed (${r.status})`;
              throw new Error(errMsg);
            }

            form.reset();
            setNote('Thanks! Your message was sent.', true);
          } catch (err) {
            console.error('Form submit error:', err);
            setNote('Sorry, there was a problem sending your message. Please email hello@ocdoublewinners.com.', false);
          }
        });
      }

      // ===== PDF Reader Mode =====
      const modal = document.getElementById('pdfModal');
      const pdfTitle = document.getElementById('pdfTitle');
      const pdfFrame = document.getElementById('pdfFrame');
      const pdfOpen  = document.getElementById('pdfOpen');
      const pdfClose = document.getElementById('pdfClose');
      const pdfPrint = document.getElementById('pdfPrint');

      function openReader(href, title){
        if (!modal || !pdfFrame) return;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
        const viewUrl = href + '#view=FitH';
        pdfFrame.src = viewUrl;
        if (pdfTitle) pdfTitle.textContent = title || 'Reader';
        if (pdfOpen) pdfOpen.href = href;
      }
      function closeReader(){
        if (!modal || !pdfFrame) return;
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        pdfFrame.src = '';
      }

      // Delegate clicks from all .pdf-card
      document.addEventListener('click', (ev)=>{
        const card = ev.target.closest('.pdf-card');
        if (!card) return;
        const href = card.getAttribute('data-pdf') || card.getAttribute('href');
        if (!href) return;
        ev.preventDefault();
        const title = card.querySelector('span')?.textContent?.trim() || 'PDF';
        openReader(href, title);
      });

      // Close buttons & escape/outside click
      if (pdfClose) pdfClose.addEventListener('click', closeReader);
      if (modal) modal.addEventListener('click', (e)=>{ if (e.target === modal) closeReader(); });
      document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape' && modal?.classList.contains('open')) closeReader(); });

      if (pdfPrint) pdfPrint.addEventListener('click', ()=>{
        try{ const win = pdfFrame?.contentWindow; win && win.print(); }
        catch(err){ alert('Use the Open PDF button, then print in your browser.'); }
      });
    })();
  </script>
</body>
</html>
